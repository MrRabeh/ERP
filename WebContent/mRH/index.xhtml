<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" lang="fr">
       <f:view contentType="text/html">
<h:body class="body">
 <ui:include src="../theme/menuadministration.xhtml" />
<div class="mainContent">
<div class="content">
	<article class="topcontent">
	<br/>
    <content>                
             <h:form id="form">
          <div >
            <table class="styletable" style="width: 60%;"  cellpadding="0">
            <div style='font-weight:bold;text-align: left;position: relative;bottom:-7px;'>créer Employée</div>
            	<tr>
	            	<td>
	            	Nom
	            	</td>
	            	<td>
	            	<p:inputText id="nonemp" styleClass="i-format"  value="#{employeeController.employee.nom}" />
                                                
	            	</td>
	            	<td>
	            	Compte Bancaire
	            	</td>
	            	<td>
	            	 <p:inputText id="bnqemp" styleClass="i-format"  value="#{employeeController.employee.comptebancaire}" />
                                               
	            	</td>
	            </tr>
	            <tr>
	            	<td>
	            	Prénom
	            	</td>
	            	<td>
	            	<p:inputText id="prenomemp"  styleClass="i-format" value="#{employeeController.employee.prenom}" />
                                                
	            	</td>
	            	<td>
	            	Profil
	            	</td>
	            	<td>
	            	<p:inputText id="profilemp" styleClass="i-format"  value="#{employeeController.employee.profil}" />
                                               
	            	</td>
	            </tr>
	            <tr>
	            	<td>
	            	Cin
	            	</td>
	            	<td>
	            	<p:inputText id="cinemp" styleClass="i-format"  value="#{employeeController.employee.cin}" />
                                                
	            	</td>
	            	<td>
	            	Département
	            	</td>
	            	<td>
	            	<p:outputLabel  for="depselect" />
                                                    <p:selectOneMenu style="width:210px" styleClass="selectonemenu" filter="true" effect="fade"  id="depselect"  tabindex="1" value="#{employeeController.idept}">
                                                        <f:selectItem itemLabel="" itemValue="0" selected="selected" ></f:selectItem>
                                                        <f:selectItems  value="#{departementController.depts}" var="dept" itemLabel="#{dept.nom}" itemValue="#{dept.id}" />
                    </p:selectOneMenu>
	            	</td>
	            </tr>
	            <tr>
	            	<td>
	            	Cnss
	            	</td>
	            	<td>
	            	<p:inputText id="cnssemp" styleClass="i-format"  value="#{employeeController.employee.cnss}" />                           
	            	</td>
	            	<td>
	            	Salaire
	            	</td>
	            	<td>
	            	 <p:inputText id="salaireemp" styleClass="i-format" value="#{employeeController.employee.salaire}" />
                                                
	            	</td>
	            </tr>
	            <tr>
	            <td><p:commandButton value="Annuler" update="msgs,bnqemp,cnssemp,salaireemp,profilemp,cinemp,prenomemp,nonemp,tablep,depselect" actionListener="#{employeeController.annuler}"></p:commandButton></td>
	            <td><p:commandButton value="Enregistrer" update="msgs,bnqemp,cnssemp,salaireemp,profilemp,cinemp,prenomemp,nonemp,tablep,depselect"    actionListener="#{employeeController.insert}" /></td>
	            </tr>
	            	</table>
	            	</div>
	            	<p:commandButton value="Actualisée" update="tablep" actionListener="#{employeeController.actualiser}"></p:commandButton>
                                        <p:growl id="msgs" showDetail="true"/>  
                                        <p:dataTable id="tablep" value="#{employeeController.employees}" var="emp"
                                                      selection="#{employeeController.objectemployee}"
                                                     rowKey="#{emp.id}"
                                                     paginator="true"
                                                     rows="10"
                                                     paginatorPosition="bottom"
                                                     emptyMessage="Aucun résultat trouvé"
                                                     filteredValue="#{employeeController.filteredEmploye}"
                                                     resizableColumns="true"
                                                     styleClass="datatablestyle"
                                                     rowStyleClass="datarowstyle"
                                                     editable="true"
                                                     editMode="cell"
                                                     >
											<p:column  selectionMode="single" style="width:16px;text-align:center"/>
                                            
                                             <p:ajax event="cellEdit" listener="#{employeeController.update}" update=":form:msgs,tablep" />
          
                                            
                                            <p:column headerText="Nom" filterBy="#{emp.nom}" filterMatchMode="contains"  sortBy="#{emp.nom}">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{emp.nom}" /></f:facet>
                                                    <f:facet name="input"><p:inputText styleClass="i-format" value="#{emp.nom}"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            
                                            <p:column headerText="Prenom" filterBy="#{emp.prenom}" filterMatchMode="contains"  sortBy="#{emp.prenom}">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{emp.prenom}" /></f:facet>
                                                    <f:facet name="input"><p:inputText styleClass="i-format" value="#{emp.prenom}"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>

                                            <p:column headerText="CIN" filterBy="#{emp.cin}" filterMatchMode="contains"  sortBy="#{emp.cin}">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{emp.cin}" /></f:facet>
                                                    <f:facet name="input"><p:inputText styleClass="i-format" value="#{emp.cin}"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>

                                            <p:column headerText="CNSS" filterBy="#{emp.cnss}" filterMatchMode="contains"  sortBy="#{emp.cnss}">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{emp.cnss}" /></f:facet>
                                                    <f:facet name="input"><p:inputText styleClass="i-format" value="#{emp.cnss}"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            
                                            <p:column headerText="Compte bancaire" filterBy="#{emp.comptebancaire}" filterMatchMode="contains"  sortBy="#{emp.comptebancaire}">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{emp.comptebancaire}" /></f:facet>
                                                    <f:facet name="input"><p:inputText styleClass="i-format" value="#{emp.comptebancaire}"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            
                                            <p:column headerText="Profil" filterBy="#{emp.profil}" filterMatchMode="contains"  sortBy="#{emp.profil}">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{emp.profil}" /></f:facet>
                                                    <f:facet name="input"><p:inputText styleClass="i-format" value="#{emp.profil}"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            
                                            <p:column headerText="Dept" filterBy="#{emp.departement.nom}" filterMatchMode="contains"  sortBy="#{emp.departement.nom}">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{emp.departement.nom}" /></f:facet>
                                                    <f:facet name="input">
                                                      <p:selectOneMenu style="width:100px" styleClass="selectonemenu" id="depselect"  tabindex="1" value="#{employeeController.ideptedit}">
                                                        <f:selectItems  value="#{departementController.depts}" var="dept" itemLabel="#{dept.nom}" itemValue="#{dept.id}" />
                    								  </p:selectOneMenu>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            
                                            <p:column headerText="Salaire" filterBy="#{emp.salaire}" filterMatchMode="contains"  sortBy="#{emp.salaire}">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{emp.salaire}" /></f:facet>
                                                    <f:facet name="input"><p:inputText styleClass="i-format" value="#{emp.salaire}"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            
                                            <p:column style="width:80px;">
                                                <f:facet name="header">         
                                                    <h:outputText class="th-sortable" value="Supprimer"/>
                                                </f:facet>
                                                <p:commandButton icon="b102"  onclick="confirmation.show()" >
                                                    <f:setPropertyActionListener target="#{employeeController.employeesupp}" value="#{emp}"/>
                                                </p:commandButton>
                                            </p:column>
                                            
                                        

                                        </p:dataTable>
                                        <!-- boîte de dialogue -->
                                        <p:confirmDialog widgetVar="confirmation" message="voulez vous supprimer l'employee ?" header="confirmation" severity="alert" >
                                            <p:commandButton value="oui" update="tablep,msgs" action="#{employeeController.Delete}" oncomplete="confirmation.hide()" />
                                            <p:commandButton value="non" onclick="confirmation.hide()" type="button" />
                                        </p:confirmDialog>
                                    </h:form>         
    </content>
    </article>
</div>
</div>
<ui:include src="../theme/mfooter.xhtml" />
</h:body>
</f:view>
</html>